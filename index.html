<!DOCTYPE html>
<html lang="sl">
<head>
  <meta charset="UTF-8" />
  <title>Arhiv - Radio Marija</title>
  <style>
    * { box-sizing: border-box; }
    html, body {
      margin: 0;
      padding: 0;
      height: 100%;
      font-family: 'Segoe UI', sans-serif;
      background: #f9f9fc;
    }
    body { display: flex; flex-direction: column; }

    header {
      background: #fff;
      padding: 10px 20px;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
      display: flex;
      align-items: center;
      justify-content: space-between;
    }
    header img { height: 50px; }
    nav a {
      margin: 0 10px;
      text-decoration: none;
      font-weight: 500;
      color: #333;
    }

    .menu { display: none; }
    .content { display: none; padding: 20px; flex: 1; }

    footer {
      background: #eee;
      padding: 10px;
      text-align: center;
      font-size: 0.9em;
    }

    .login-box {
      margin: auto;
      padding: 30px;
      background: white;
      border-radius: 12px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.1);
      width: 300px;
    }
    input, select {
      width: 100%;
      padding: 10px;
      margin-top: 10px;
      border-radius: 6px;
      border: 1px solid #ccc;
    }
    button {
      background: #2e77d0;
      color: white;
      padding: 10px;
      width: 100%;
      border: none;
      border-radius: 6px;
      margin-top: 10px;
      font-weight: bold;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 20px;
      background: white;
    }
    th, td {
      padding: 8px 12px;
      border: 1px solid #ccc;
      text-align: left;
    }
    th {
      background: #f0f0f5;
    }
  </style>
</head>
<body>

<header>
  <img src="RMS.png" alt="Radio Marija" />
  <nav class="menu">
    <a href="#" onclick="showSection('home')">DOMOV</a>
    <a href="#" onclick="showSection('program')">ARHIV</a>
    <a href="#" onclick="logout()">ODJAVA</a>
  </nav>
</header>

<!-- Prijava -->
<div id="login" class="centered" style="padding: 50px; text-align: center;">
  <div class="login-box">
    <h2>Prijava</h2>
    <input type="text" id="username" placeholder="Uporabniško ime" />
    <input type="password" id="password" placeholder="Geslo" />
    <button onclick="login()">Prijava</button>
    <p id="login-error" style="color: red; display:none;">Napaka: napačni podatki</p>
  </div>
</div>

<!-- DOMOV -->
<div id="home" class="content">
  <div style="text-align: center;">
    <img src="RMS.png" alt="RMS logo" style="max-width: 300px;" />
  </div>
</div>

<!-- ARHIV / PROGRAM -->
<div id="program" class="content">
  <h2>Program scenarijev</h2>
  <div>
    <input type="text" id="naslov" placeholder="Naslov oddaje" />
    <input type="time" id="ura" />
    <select id="tip">
      <option value="prevod">Prevod</option>
      <option value="podnapisi">Podnapisi</option>
      <option value="voice-over">Voice-over</option>
    </select>
    <input type="text" id="jezik" placeholder="Jezik (npr. slovenščina)" />
    <input type="text" id="opombe" placeholder="Opombe" />
    <button onclick="dodajVnos()">Dodaj v program</button>
  </div>

  <table id="tabelaProgram">
    <thead>
      <tr>
        <th>Ura</th>
        <th>Naslov</th>
        <th>Tip</th>
        <th>Jezik</th>
        <th>Opombe</th>
        <th>Dodal</th>
      </tr>
    </thead>
    <tbody></tbody>
  </table>
</div>

<footer>
  © Radio Marija Slovenija, 2025
</footer>

<script>
  const uporabniki = {
    "jasa": {ime: "Jaša Petrinjak", geslo: "rms1"},
    "neja": {ime: "Neja Stvarnik", geslo: "rms2"},
    "julija": {ime: "Julija Brilej", geslo: "rms3"}
  };

  let prijavljen = "";

  function login() {
    const u = document.getElementById("username").value;
    const p = document.getElementById("password").value;

    if (uporabniki[u] && uporabniki[u].geslo === p) {
      prijavljen = u;
      document.getElementById("login").style.display = "none";
      document.querySelector("nav.menu").style.display = "block";
      showSection("home");
      naloziProgram();
    } else {
      document.getElementById("login-error").style.display = "block";
    }
  }

  function logout() {
    location.reload();
  }

  function showSection(id) {
    document.querySelectorAll(".content").forEach(e => e.style.display = "none");
    document.getElementById(id).style.display = "block";
  }

  function dodajVnos() {
    const naslov = document.getElementById("naslov").value.trim();
    const ura = document.getElementById("ura").value;
    const tip = document.getElementById("tip").value;
    const jezik = document.getElementById("jezik").value.trim();
    const opombe = document.getElementById("opombe").value.trim();

    if (!naslov || !ura || !jezik) {
      alert("Izpolnite obvezna polja (naslov, ura, jezik)");
      return;
    }

    const zapis = {
      naslov, ura, tip, jezik, opombe,
      dodal: uporabniki[prijavljen].ime
    };

    let program = JSON.parse(localStorage.getItem("program") || "[]");
    program.push(zapis);
    program.sort((a, b) => a.ura.localeCompare(b.ura));
    localStorage.setItem("program", JSON.stringify(program));
    prikaziProgram();
    document.getElementById("naslov").value = "";
    document.getElementById("jezik").value = "";
    document.getElementById("opombe").value = "";
  }

  function naloziProgram() {
    prikaziProgram();
  }

  function prikaziProgram() {
    const program = JSON.parse(localStorage.getItem("program") || "[]");
    const tbody = document.querySelector("#tabelaProgram tbody");
    tbody.innerHTML = "";
    program.forEach(item => {
      const tr = document.createElement("tr");
      tr.innerHTML = `
        <td>${item.ura}</td>
        <td>${item.naslov}</td>
        <td>${item.tip}</td>
        <td>${item.jezik}</td>
        <td>${item.opombe}</td>
        <td>${item.dodal}</td>
      `;
      tbody.appendChild(tr);
    });
  }
</script>

</body>
</html>
